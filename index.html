<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sazid Shaaj Ghar</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #fdfdfd; }
    header { background: #e91e63; color: white; padding: 1.5em; text-align: center; }
    .products, .product-detail { display: grid; gap: 1.5em; padding: 2em; }
    .products { grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); }
    .product { background: #fff; padding: 1em; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); text-align: center; cursor: pointer; transition: transform 0.2s; }
    .product:hover { transform: scale(1.02); }
    .product img { width: 100%; height: 150px; object-fit: cover; border-radius: 10px; }
    .product h3 { margin: 0.5em 0; color: #333; }
    .product-detail { display: none; grid-template-columns: 1fr; text-align: center; }
    .product-detail.active { display: grid; }
    .designs { display: flex; flex-wrap: wrap; justify-content: center; margin-top: 1em; }
    .designs img { width: 80px; height: 80px; margin: 0.5em; border-radius: 8px; cursor: pointer; border: 2px solid transparent; transition: transform 0.2s; }
    .designs img:hover { transform: scale(1.05); }
    .designs img.selected { border-color: #e91e63; }
    .buttons { margin-top: 1em; }
    .buttons button { padding: 0.8em 1.5em; margin: 0.5em; border: none; border-radius: 5px; font-size: 1em; cursor: pointer; transition: background 0.3s; }
    .add { background: #2196f3; color: white; }
    .add:hover { background: #1e88e5; }
    .buy { background: #4caf50; color: white; }
    .buy:hover { background: #43a047; }
    .back { background: #e91e63; color: white; }
    .back:hover { background: #d81b60; }
    .datetime-label { margin-top: 1em; font-weight: bold; }
    .datetime-input, .delivery-select, .delivery-location { padding: 0.5em; font-size: 1em; margin-top: 0.5em; width: 100%; max-width: 300px; }
    #location-info { margin-top: 1em; font-style: italic; color: #555; }
  </style>
</head>
<body>
  <header>
    <h1>Sazid Shaaj Ghar</h1>
    <p>Event Management & Flower Decoration</p>
  </header>
  <section class="products" id="product-list"></section>
  <section class="product-detail" id="product-detail">
    <button class="back" onclick="goBack()">← Back</button>
    <h2 id="detail-title"></h2>
    <img id="detail-image" src="" alt="Product" style="width:100%; max-width:400px; margin:auto;">
    <div class="designs" id="designs"></div>
    <input type="file" id="custom-design" accept="image/*" onchange="uploadCustom()">
    <div class="datetime-label">When is it needed?</div>
    <input class="datetime-input" type="datetime-local" id="need-date-time" />
    <div class="datetime-label">Delivery Option</div>
    <select class="delivery-select" id="delivery-option" onchange="handleDeliveryOption()">
      <option value="Takeaway">Takeaway</option>
      <option value="Delivery">Delivery</option>
    </select>
    <div id="location-info"></div>
    <input class="delivery-location" type="text" id="custom-location" placeholder="Enter your delivery location" style="display:none;" />
    <div class="buttons">
      <button class="add" onclick="addToCart()">Add to Cart</button>
      <button class="buy" onclick="buyNow()">Buy Now</button>
    </div>
  </section>  

  <script>
    const products = [
      { name: "বাসরঘর", img: "https://via.placeholder.com/300x200?text=বাসরঘর" },
      { name: "স্টেজ 1", img: "https://via.placeholder.com/300x200?text=স্টেজ+1" },
      { name: "স্টেজ 2", img: "https://via.placeholder.com/300x200?text=স্টেজ+2" },
      { name: "স্টেজ 3", img: "https://via.placeholder.com/300x200?text=স্টেজ+3" },
      { name: "ফুল", img: "https://via.placeholder.com/300x200?text=ফুল" },
      { name: "তোরা", img: "https://via.placeholder.com/300x200?text=তোরা" },
      { name: "গাড়ি", img: "https://via.placeholder.com/300x200?text=গাড়ি" },
      { name: "মালা", img: "https://via.placeholder.com/300x200?text=মালা" },
      { name: "ফুলের ঝুড়ি", img: "https://via.placeholder.com/300x200?text=ফুলের+ঝুড়ি" },
      { name: "ইভেন্ট ম্যানেজমেন্ট", img: "https://via.placeholder.com/300x200?text=ইভেন্ট+ম্যানেজমেন্ট" },
      { name: "গায়ে হলুদ", img: "https://via.placeholder.com/300x200?text=গায়ে+হলুদ" },
      { name: "বার্থডে", img: "https://via.placeholder.com/300x200?text=বার্থডে" }
    ];

    const stageDesigns = [
      "https://drive.google.com/uc?id=1VCSIcH57ykeOUVAjiySmsYzUaRK-Fvmi",
      "https://drive.google.com/uc?id=1VWiGHxxmwBYQrRJHlkl6hx-v76wltZug",
      "https://drive.google.com/uc?id=1VWdX_B7O_bjkp14DsPpI8jSosp8t8vlS",
      "https://drive.google.com/uc?id=1VWAeuizTBLzgCNIHoNoidYSUJ-dCPzQa",
      "https://drive.google.com/uc?id=1VTgeoiEeDgUdHVqe7py-0IuQqkhwOV07"
    ];

    let selectedProduct = null;
    let selectedDesign = null;

    const productList = document.getElementById("product-list");
    const productDetail = document.getElementById("product-detail");
    const locationInfo = document.getElementById("location-info");
    const customLocationInput = document.getElementById("custom-location");

    products.forEach((product, index) => {
      const div = document.createElement("div");
      div.className = "product";
      div.innerHTML = `<img src="${product.img}" alt="${product.name}" /><h3>${product.name}</h3>`;
      div.onclick = () => showProduct(index);
      productList.appendChild(div);
    });

    function showProduct(index) {
      selectedProduct = products[index];
      selectedDesign = null;
      document.getElementById("detail-title").innerText = selectedProduct.name;
      document.getElementById("detail-image").src = selectedProduct.img;
      document.getElementById("product-list").style.display = "none";
      productDetail.classList.add("active");

      const designContainer = document.getElementById("designs");
      const designList = selectedProduct.name.startsWith("স্টেজ") ? stageDesigns : [];
      designContainer.innerHTML = designList.map(d => `<img src="${d}" onclick="selectDesign(this)" />`).join("");

      document.getElementById("need-date-time").value = "";
      document.getElementById("delivery-option").value = "Takeaway";
      handleDeliveryOption();
    }

    function selectDesign(imgElement) {
      document.querySelectorAll(".designs img").forEach(img => img.classList.remove("selected"));
      imgElement.classList.add("selected");
      selectedDesign = imgElement.src;
    }

    function uploadCustom() {
      const file = document.getElementById("custom-design").files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          selectedDesign = e.target.result;
          document.querySelectorAll(".designs img").forEach(img => img.classList.remove("selected"));
        };
        reader.readAsDataURL(file);
      }
    }

    function handleDeliveryOption() {
      const option = document.getElementById("delivery-option").value;
      if (option === "Takeaway") {
        locationInfo.innerHTML = `Pickup Location: <a href="https://maps.app.goo.gl/aW1tMgSrNxHXWh9y8" target="_blank">View on Map</a>`;
        customLocationInput.style.display = "none";
      } else {
        locationInfo.innerHTML = "Enter your address below:";
        customLocationInput.style.display = "block";
      }
    }

    function getCurrentDateTime() {
      const now = new Date();
      return now.toLocaleString();
    }

    function sendOrderToWhatsApp(orderDetails) {
      const whatsappMessage = `Order Details:\n${orderDetails}`;
      const whatsappURL = `https://wa.me/+8801840117711?text=${encodeURIComponent(whatsappMessage)}`;
      window.open(whatsappURL, '_blank');
    }

    function addToCart() {
      const currentTime = getCurrentDateTime();
      const needDateTime = document.getElementById("need-date-time").value;
      const deliveryOption = document.getElementById("delivery-option").value;
      const userLocation = deliveryOption === "Delivery" ? document.getElementById("custom-location").value : "Pickup at store";
      const orderDetails = `${selectedProduct.name} added to cart.\nDesign: ${selectedDesign ? 'Attached' : 'None'}\nOrdered: ${currentTime}\nNeeded on: ${needDateTime || 'Not specified'}\nDelivery: ${deliveryOption}\nLocation: ${userLocation}`;
      
      sendOrderToWhatsApp(orderDetails);
      goBack();
    }

    function buyNow() {
      addToCart();
      alert("Order placed successfully!");
    }

    function goBack() {
      productDetail.classList.remove("active");
      document.getElementById("product-list").style.display = "grid";
    }
  </script>
</body>
</html>
